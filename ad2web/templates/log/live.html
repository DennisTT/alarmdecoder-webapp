{% set page_title = "Live Log" %}

{% extends "log/layout.html" %}

{% block pagejs %}
    <script type="text/javascript">
        var giCount = 1;
        $(document).ready(function() {
            PubSub.subscribe('message', function(type, msg) {
                var n = new Date();
                var day = n.getDay();
                var month = n.getMonth();
                var year = n.getYear();
                var hour = n.getHours();
                var min = n.getMinutes();
                var sec = n.getSeconds();
                var datetime = day + "/" + month + "/" + year + " " + hour + ":" + min + ":" + sec;

                $('#panel-log').dataTable().fnAddData([ datetime, msg.raw]);
            });
            $('#panel-log').dataTable({
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "bFilter": false,
                "aaSorting": [[0, "desc" ]],
            });
        });
    </script>
{% endblock %}

{% block body %}
<div>
    <h2>Panel Log</h2>
    <table id='panel-log' cellpadding="3" class="display table-hover" border="1" bordercolor="EEEEEE">
        <thead>
            <tr>
                <th width="20%">Timestamp</th>
                <th>Message</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <a href="/log">Event Log</a>
</div>
{% endblock %}
