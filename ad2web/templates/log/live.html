{% set page_title = "Live Log" %}

{% extends "log/layout.html" %}

{% block pagejs %}
    <script type="text/javascript">
        $(document).ready(function() {
            PubSub.subscribe('message', function(type, msg) {
                $('#panel-log tbody').prepend('<tr><td>' + msg.timestamp + '</td><td>' + msg.raw + '</td></tr>');

                var log_size = $('#panel-log tbody tr').length;
                if (log_size > 10) {
                    var row = $('#panel-log tbody tr:gt(' + (10).toString() + ')');

                    row.slideDown(400, function(){ row.remove(); });
                }
            });
        });
    </script>
{% endblock %}

{% block body %}
<div>
    <h2>Panel Log</h2>
    <table id='panel-log' class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Message</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
{% endblock %}
